<!-- Latest compiled and minified CSS -->

 <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs-3.3.7/jq-2.2.4/dt-1.10.13/b-1.2.4/b-html5-1.2.4/b-print-1.2.4/fh-3.1.2/r-2.1.1/sc-1.4.2/datatables.min.css" />
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/bootstrap-table.min.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
<link href="http://cdn.rawgit.com/davidstutz/bootstrap-multiselect/master/dist/css/bootstrap-multiselect.css" rel="stylesheet" type="text/css" />
<link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css"
    rel="stylesheet" type="text/css" />





<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.14.2/dist/bootstrap-table.min.js"></script>

<script src="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.js"></script>
 
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<!-- Latest compiled and minified JavaScript -->









	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/bootstrap-table.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/locale/bootstrap-table-pl-PL.min.js"></script>

	<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter/bootstrap-table-filter.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>


      











<div class="container">
  <h3>Bootstrap-table</h3>
  <h6>Multi-select with multiple column filter</h6>
</div>
<table
  id="table"
  data-filter-control="true"
  data-show-search-clear-button="true"
  data-show-filter-control-switch="true"
  >
  <thead>
    <tr>
      <th data-field="state" data-checkbox="true"></th>
      <th data-field="id" data-filter-control="select">Id</th>
      <th data-field="name" data-filter-control="select">Name</th>
      <th data-field="city" data-filter-control="select">City (multi-select col)</th>
      <th data-field="age" data-filter-control="select">Age</th>
    </tr>
  </thead>
</table>
  
<script type="text/javascript">
$(function () {
  var data = [{
    "id": "1",
    "name": "Jen",
    "city": "Melbourne",
    "age": "65"
  }, {
    "id": "2",
    "name": "Roger",
    "city": "Melbourne",
    "age": "34"
  }, {
    "id": "3",
    "name": "Rob",
    "city": "Sydney",
    "age": "23"
  }, {
    "id": "4",
    "name": "George",
    "city": "Sydney",
    "age": "45"
  }, {
    "id": "5",
    "name": "Fred",
    "city": "Perth",
    "age": "23"
  }, {
    "id": "6",
    "name": "Kelly",
    "city": "Melbourne",
    "age": "23"
  }, {
    "id": "7",
    "name": "Gina",
    "city": "Perth",
    "age": "25"
  }]
console.log(typeof(data))
  var $table = $('#table')
  $table.bootstrapTable({
    data: data
  })
 
  $('button[name="clearSearch"]').click(function() {
    $('select.bootstrap-table-filter-control-city').multipleSelect('setSelects', [])
    filterData()
  })
  
  function customFilter(row,filter){
    const filterCities = filter['cities']
    return filterCities.length == 0 || filterCities.includes(row.city)
  }
  
  function filterData() {
    $table.bootstrapTable('filterBy', {
      cities: $('select.bootstrap-table-filter-control-city').multipleSelect('getSelects')
    }, {
      'filterAlgorithm': customFilter
    })
  }
  
  $('select.bootstrap-table-filter-control-city').change(function () {
    filterData()
  })

  
  
  $(function () {
    var $select = $('select.bootstrap-table-filter-control-city')
    $select.attr('multiple','multiple')
    $select.find('option[value=""]').remove();
    $select.multipleSelect({
	 includeSelectAllOption : true ,
             enableFiltering: true,
      filter: true,
      selectAll:true
    })
  })
})
</script>

